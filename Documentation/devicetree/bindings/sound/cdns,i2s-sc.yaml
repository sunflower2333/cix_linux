# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/sound/cdns,i2s-sc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title:
  Cadence I2S-SC (SingleChannel) Controller Driver

maintainers:
  - Joakim Zhang <joakim.zhang@cixtech.com>

properties:
  compatible:
    enum:
      - cdns,sky1-i2s-sc

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  clocks:
    minItems: 2
    maxItems: 3
    items:
      - description: APB clock is used to provide synchronization of the designâ€™s APB slave
                     interface with external APB master (at the SoC level).
                     The following modules are clocked by hst clock:
                             - U_CDNSI2SSC_APB_SLAVE
                             - U_CDNSI2SSC_SFR
                             - U_CDNSI2SSC_FIFO_RX_APB
                             - U_CDNSI2SSC_FIFO_TX_APB
      - description: The main clock for synchronous logic in I2S transceiver.
                     The following modules are clocked by i2s clock:
                             - U_CDNSI2SSC_TRX_CTRL
                             - U_CDNSI2SSC_RX_DATA
                             - U_CDNSI2SSC_TX_DATA
                             - U_CDNSI2SSC_FIFO_RX_I2S
                             - U_CDNSI2SSC_FIFO_TX_I2S
      - description: master clock feeding external codec

  clock-names:
    minItems: 2
    maxItems: 3
    items:
      - const: hst
      - const: i2s
      - const: mclk

  dmas:
    items:
      - description: audio playback dma
      - description: audio capture dma

  dma-names:
    items:
      - const: tx
      - const: rx

  cdns,cru-ctrl:
    description: Phandle to syscon block which provide access to Clock Reset Unit.

  cdns,mclk-idx:
    description: The index of mclk if mclk is present.

  "#sound-dai-cells":
    const: 0

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names
  - dmas
  - dma-names
  - cdns,mclk-idx
  - "#sound-dai-cells"

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    i2s_sc0: i2s@03010000 {
      compatible = "cdns,sky1-i2s-sc";
      reg = <0x0 0x03010000 0x0 0x10000>;
      interrupts = <GIC_SPI 88 IRQ_TYPE_LEVEL_HIGH>;
      clocks = <&clks 1>, <&clks 2>, <&clks 3>;
      clock-names = "hst", "i2s", "mclk";
      dmas = <&dma>, <&dma>;
      dma-names = "tx", "rx";
      #sound-dai-cells = <0>;
    }
